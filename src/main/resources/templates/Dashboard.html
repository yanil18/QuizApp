<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <!-- Header -->
  <head
    th:replace="~{fragments/header :: header('Dashboard - QuizApp')}"
  ></head>

  <body>
    <!-- Sidebar -->
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <main class="main-content">
      <!-- Top Navigation -->
      <nav class="top-nav">
        <div class="top-nav-left">
          <button class="menu-toggle" id="menuToggle">
            <i class="fas fa-bars"></i>
          </button>

          <div class="search-bar">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Search..." />
          </div>
        </div>

        <div class="top-nav-right">
          <div class="notification-icon">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>
          </div>

          <div class="user-profile">
            <div class="user-avatar">JD</div>
            <div class="user-info">
              <div class="user-name">John Doe</div>
              <div class="user-role">Administrator</div>
            </div>
            <i class="fas fa-chevron-down"></i>
          </div>
        </div>
      </nav>

      <!-- Dashboard content (your original content) -->
      <!-- Dashboard Content -->
      <div class="dashboard-content">
        <!-- Page Header -->
        <div class="page-header">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <h1 class="page-title">Dashboard Overview</h1>
              <p class="page-subtitle">
                Welcome back! Here's what's happening with your projects today.
              </p>
            </div>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadQuizModal" style="height: fit-content;">
              <i class="fas fa-plus-circle"></i> Upload Quiz
            </button>
          </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-header">
              <div>
                <div class="stat-label">Total Projects</div>
                <div class="stat-value">24</div>
                <div class="stat-change positive">
                  <i class="fas fa-arrow-up"></i> 12% from last month
                </div>
              </div>
              <div class="stat-icon blue">
                <i class="fas fa-folder"></i>
              </div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-header">
              <div>
                <div class="stat-label">Active Tasks</div>
                <div class="stat-value">156</div>
                <div class="stat-change positive">
                  <i class="fas fa-arrow-up"></i> 8% from last week
                </div>
              </div>
              <div class="stat-icon green">
                <i class="fas fa-tasks"></i>
              </div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-header">
              <div>
                <div class="stat-label">Team Members</div>
                <div class="stat-value">48</div>
                <div class="stat-change positive">
                  <i class="fas fa-arrow-up"></i> 4 new this month
                </div>
              </div>
              <div class="stat-icon purple">
                <i class="fas fa-users"></i>
              </div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-header">
              <div>
                <div class="stat-label">Completion Rate</div>
                <div class="stat-value">87%</div>
                <div class="stat-change negative">
                  <i class="fas fa-arrow-down"></i> 3% from last month
                </div>
              </div>
              <div class="stat-icon orange">
                <i class="fas fa-chart-pie"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
          <!-- Recent Activity -->
          <div class="content-card">
            <div class="card-header">
              <h3 class="card-title">Recent Activity</h3>
              <button class="btn-secondary">View All</button>
            </div>
            <div class="card-body">
              <div class="activity-item">
                <div class="activity-icon blue">
                  <i class="fas fa-file-alt"></i>
                </div>
                <div class="activity-content">
                  <div class="activity-title">New project created</div>
                  <div class="activity-time">2 hours ago</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon green">
                  <i class="fas fa-check-circle"></i>
                </div>
                <div class="activity-content">
                  <div class="activity-title">
                    Task completed: Design Review
                  </div>
                  <div class="activity-time">4 hours ago</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon purple">
                  <i class="fas fa-user-plus"></i>
                </div>
                <div class="activity-content">
                  <div class="activity-title">New team member added</div>
                  <div class="activity-time">Yesterday</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon orange">
                  <i class="fas fa-comment"></i>
                </div>
                <div class="activity-content">
                  <div class="activity-title">
                    5 new comments on Project Alpha
                  </div>
                  <div class="activity-time">2 days ago</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="content-card">
            <div class="card-header">
              <h3 class="card-title">Quick Actions</h3>
            </div>
            <div class="card-body">
              <div class="quick-actions">
                <a href="#" class="action-btn" data-bs-toggle="modal" data-bs-target="#uploadQuizModal">
                  <i class="fas fa-file-upload"></i>
                  <span>Upload Quiz</span>
                </a>
                <a href="#" class="action-btn">
                  <i class="fas fa-chart-bar"></i>
                  <span>View Results</span>
                </a>
                <a href="#" class="action-btn">
                  <i class="fas fa-users"></i>
                  <span>Manage Users</span>
                </a>
                <a th:href="@{/}" class="action-btn">
                  <i class="fas fa-home"></i>
                  <span>View Site</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Upload Quiz Modal -->
    <div class="modal fade" id="uploadQuizModal" tabindex="-1" aria-labelledby="uploadQuizModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadQuizModalLabel">Upload Quiz</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="post" th:action="@{/admin/quiz/upload}" enctype="multipart/form-data">
                        <div class="mb-3">
                            <label class="form-label">Quiz Name</label>
                            <input type="text" name="quizName" class="form-control" placeholder="e.g., FCU Computer Science Engineering (CSE)" required>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Quiz Type</label>
                                <select name="quizType" class="form-control" required>
                                    <option value="">Select Type</option>
                                    <option value="Exam">Exam</option>
                                    <option value="Practice">Practice</option>
                                    <option value="Mock Test">Mock Test</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Quiz Date</label>
                                <input type="date" name="quizDate" class="form-control" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Duration (Minutes)</label>
                            <input type="number" name="duration" class="form-control" placeholder="e.g., 10" required>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Excel File</label>
                            <input type="file" name="file" class="form-control" accept=".xlsx,.xls" required>
                            <small class="text-muted">
                                Excel format: Question | Option A | Option B | Option C | Option D | Correct Answer | Marks
                            </small>
                        </div>
                        
                        <div class="alert alert-info">
                            <strong>Note:</strong> The Excel file should have the following columns:
                            <ul class="mb-0 mt-2">
                                <li>Column 1: Question Text</li>
                                <li>Column 2: Option A</li>
                                <li>Column 3: Option B</li>
                                <li>Column 4: Option C</li>
                                <li>Column 5: Option D</li>
                                <li>Column 6: Correct Answer (A, B, C, or D)</li>
                                <li>Column 7: Marks</li>
                            </ul>
                        </div>
                        
                        <button type="submit" class="btn btn-primary w-100">Upload Quiz</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div th:replace="~{fragments/footer :: footer}"></div>
  </body>
</html>
